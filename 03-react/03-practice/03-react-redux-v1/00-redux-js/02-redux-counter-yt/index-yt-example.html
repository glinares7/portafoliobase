<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <head name="viewport" content="width=device-width, initial-scale=1.0">
        <title>redux example with react-redux-object</title>
    </head>

<body>
    <p id="value"></p>
    <button id="increment">+</button>
    <button id="decrement">-</button>
    <button id="incrementIfOdd">incrementifodd</button>
    <button id="async">async</button>




</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"></script>

<script>


    var value = document.getElementById("value")

    // redux



    function counter(state, action) {
        if (typeof state === "undefined") {
            return 0
        }
        switch (action.type) {
            case 'INCREMENT':
                return state = state + 1
            case 'DECREMENT':
                return state = state - 1
            case 'ODD':
                return state = state + 1
            case 'ASYNC':
                return state = state + 1
            default:
                return state

        }
    }




    var store = Redux.createStore(counter, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())

    function render() {
        value.innerHTML = store.getState().toString()

        console.log("***subscribe watch***", store.getState());

    }

    render()

    // subscribe to changes of state 

    store.subscribe(render)

    document.getElementById('increment').addEventListener('click', function () {
        store.dispatch({ type: 'INCREMENT' })
    })


    document.getElementById('decrement').addEventListener('click', function () {
        store.dispatch({ type: 'DECREMENT' })
    })


    document.getElementById('incrementIfOdd').addEventListener('click', function () {
        if (store.getState() % 2 !== 0) {
            store.dispatch({ type: 'ODD' })
        }
    })
    document.getElementById('async').addEventListener('click', function () {
        setTimeout(() => {
            store.dispatch({ type: 'ASYNC' })
        }, 1000);
    })



</script>

</html>